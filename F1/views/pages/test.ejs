<!DOCTYPE html>
<html lang="en">
<head>

    <!-- Includes the code from the head file in order use bootstrap/css-->
    <%- include('../partials/head'); %>
</head>
<body class="container">

    <header>
       <!-- Inserts the code for the header which creates the logo and the tabs on the top of the page-->
        <%- include('../partials/header'); %>
       
    </header>

    <main>

        <!-- creates a jumbotron to encapsulate the data into one section and then centers it-->
       
        <div class="row align-items">
            <div class="col jumbotron" id="leadm">
            <table class="table table-striped table-hover" id="tablelap">
                <thead>
                    <tr>
                        <th scope="col"> # </th>
                        <th scope="col"> Driver </th>
                        <th scope="col"> Team </th>
                        <th scope="col"> Points</th> 

                    </tr>
                </thead>
                <% if(locals.driver) { %>
                <tbody>
                    <% for (i = 1; i <=20; i++) {%>
                        <tr>
                            <th scope="col"> <%=i%> </th>
                            <th scope="col"> <%=driver[i-1].Driver.givenName + " " + driver[i-1].Driver.familyName %></th>
                            <th scope="col"> <%= driver[i-1].Constructors[0].name %></th>
                            <th scope="col"> <%= driver[i-1].points %></th>
                        </tr>
                    <%}%>
                </tbody>
                <%}%>

            </table>
        </div>

        <div class="col-md-auto">
        </div>
        <div class="col jumbotron" id="leadc">
            <table class="table table-striped table-hover" id="tablelap">
                <thead>
                    <tr>
                        <th scope="col"> # </th>
                        <th scope="col"> Team Name </th>
                        <th scope="col"> Points </th> 

                    </tr>
                </thead>
                <% if(locals.constructor) { %>
                <tbody>
                    <% for (i = 1; i <=10; i++) {%>
                        <tr id="T<%=i%>">
                            <th scope="col"> <%=i%> </th>
                            <th scope="col"> <%=constructor[i-1].Constructor.name %></th>
                            <th scope="col"> <%= constructor[i-1].points %></th>
                        </tr>
                    <%}%>
                </tbody>
                <%}%>

            </table>
<br>
<% if(locals.driversround) {%>

            <% 
            var driver1 = driversround[0]
            var driver2 = driversround[1]
            var driver3 = driversround[2]
            
            %> 
            <canvas id="myChart" width="50" height="50"></canvas>
            
            <p id="demo"></p>
            <script>
                var driv1 = '<%=driver1%>'
                var zys  = []
            for ( let i = 0; i < 3; i++){
                var b = {label: "Weekend Pace",
                fill: false,
                lineTension: 0.1,
                backgroundColor: "rgba(75, 192, 192, 0.4)",
                borderColor: "rgba(75, 192, 192, 1)",
                borderCapStyle: 'butt',
                borderDash: [],
                borderDashOffset: 0.0,
                borderJoinStyle: 'miter',
                pointBorderColor: "rgba(75,192,192,1)",
                pointBackgroundColor: "#fff",
                pointBorderWidth: 1,
                pointHoverRadius: 5,
                pointHitRadius: 10,
                data: [i,i,i,i,i,i,i,i,i]}
                zys.push(b)
                console.log(b)
               
            }
            document.getElementById("demo").innerHTML=driv1
           
           const CHART = document.getElementById("myChart");
           console.log(CHART)
           let lineChart= new Chart(CHART, {
               type:'line',
               data: {
        labels: ["R1","R2","R3","R4","R5","R6","R7","R8","R9"],
        datasets: [
                zys[0],   zys[1],   zys[2]
        ]},
          options: {
        scales: {
            yAxes: [{
        display: true,
        stacked: true,
        ticks: {
            min: 0, // minimum value
            max: 10 // maximum value
        }
    }]
        }
        }


           });
            </script>   
            <%}%>
        </div>
        
        </div>
            <!-- Main text -->
            <p1 id="welcome">Welcome to RandFlick!</p1>

        

       
    </main>

    <footer>
       <!-- Includes the code for the footer that will show up at the bottom of the page -->
        <%- include('../partials/footer'); %>
    </footer>

</body>
</html>